# workflows/ingest_workflow.yaml

main:
  steps:
    - call_ingest:
        call: http.post
        args:
          url: ${INGEST_URL}
          auth:
            type: OIDC
        retry:
          max_retries: 5               # total retry attempts
          backoff:
            initial_delay: 10          # seconds before 1st retry
            max_delay: 60              # cap backoff at 60 s
            multiplier: 2              # exponential backoff multiplier

    - success_log:
        return: "load-ok"
